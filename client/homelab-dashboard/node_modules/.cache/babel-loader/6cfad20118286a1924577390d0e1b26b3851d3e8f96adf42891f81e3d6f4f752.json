{"ast":null,"code":"\"use strict\";\n\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst MessageEvent = require(\"./generated/MessageEvent\");\nconst idlUtils = require(\"./generated/utils\");\nconst {\n  isValidTargetOrigin\n} = require(\"../utils\");\nconst {\n  fireAnEvent\n} = require(\"./helpers/events\");\nmodule.exports = function (globalObject) {\n  return function (message, targetOrigin) {\n    if (arguments.length < 2) {\n      throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n    }\n    targetOrigin = String(targetOrigin);\n    if (!isValidTargetOrigin(targetOrigin)) {\n      // TODO: Fix me\n      throw DOMException.create(globalObject, [\"Failed to execute 'postMessage' on 'Window': \" + \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\", \"SyntaxError\"]);\n    }\n\n    // TODO: targetOrigin === '/' - requires reference to source window\n    // See https://github.com/jsdom/jsdom/pull/1140#issuecomment-111587499\n    if (targetOrigin !== \"*\" && targetOrigin !== idlUtils.implForWrapper(globalObject._document)._origin) {\n      return;\n    }\n\n    // TODO: event.source - requires reference to source window\n    // TODO: event.origin - requires reference to source window\n    // TODO: event.ports\n    // TODO: event.data - structured clone message - requires cloning DOM nodes\n    setTimeout(() => {\n      fireAnEvent(\"message\", this, MessageEvent, {\n        data: message\n      });\n    }, 0);\n  };\n};","map":{"version":3,"names":["DOMException","require","MessageEvent","idlUtils","isValidTargetOrigin","fireAnEvent","module","exports","globalObject","message","targetOrigin","arguments","length","TypeError","String","create","implForWrapper","_document","_origin","setTimeout","data"],"sources":["D:/benki/Programming/GitHub/homelab-dashboard/client/homelab-dashboard/node_modules/jsdom/lib/jsdom/living/post-message.js"],"sourcesContent":["\"use strict\";\nconst DOMException = require(\"domexception/webidl2js-wrapper\");\nconst MessageEvent = require(\"./generated/MessageEvent\");\nconst idlUtils = require(\"./generated/utils\");\nconst { isValidTargetOrigin } = require(\"../utils\");\nconst { fireAnEvent } = require(\"./helpers/events\");\n\nmodule.exports = function (globalObject) {\n  return function (message, targetOrigin) {\n    if (arguments.length < 2) {\n      throw new TypeError(\"'postMessage' requires 2 arguments: 'message' and 'targetOrigin'\");\n    }\n\n    targetOrigin = String(targetOrigin);\n\n    if (!isValidTargetOrigin(targetOrigin)) {\n      // TODO: Fix me\n      throw DOMException.create(globalObject, [\n        \"Failed to execute 'postMessage' on 'Window': \" +\n        \"Invalid target origin '\" + targetOrigin + \"' in a call to 'postMessage'.\",\n        \"SyntaxError\"\n      ]);\n    }\n\n    // TODO: targetOrigin === '/' - requires reference to source window\n    // See https://github.com/jsdom/jsdom/pull/1140#issuecomment-111587499\n    if (targetOrigin !== \"*\" && targetOrigin !== idlUtils.implForWrapper(globalObject._document)._origin) {\n      return;\n    }\n\n    // TODO: event.source - requires reference to source window\n    // TODO: event.origin - requires reference to source window\n    // TODO: event.ports\n    // TODO: event.data - structured clone message - requires cloning DOM nodes\n    setTimeout(() => {\n      fireAnEvent(\"message\", this, MessageEvent, { data: message });\n    }, 0);\n  };\n};\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,YAAY,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AAC9D,MAAMC,YAAY,GAAGD,OAAO,CAAC,0BAA0B,CAAC;AACxD,MAAME,QAAQ,GAAGF,OAAO,CAAC,mBAAmB,CAAC;AAC7C,MAAM;EAAEG;AAAoB,CAAC,GAAGH,OAAO,CAAC,UAAU,CAAC;AACnD,MAAM;EAAEI;AAAY,CAAC,GAAGJ,OAAO,CAAC,kBAAkB,CAAC;AAEnDK,MAAM,CAACC,OAAO,GAAG,UAAUC,YAAY,EAAE;EACvC,OAAO,UAAUC,OAAO,EAAEC,YAAY,EAAE;IACtC,IAAIC,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;MACxB,MAAM,IAAIC,SAAS,CAAC,kEAAkE,CAAC;IACzF;IAEAH,YAAY,GAAGI,MAAM,CAACJ,YAAY,CAAC;IAEnC,IAAI,CAACN,mBAAmB,CAACM,YAAY,CAAC,EAAE;MACtC;MACA,MAAMV,YAAY,CAACe,MAAM,CAACP,YAAY,EAAE,CACtC,+CAA+C,GAC/C,yBAAyB,GAAGE,YAAY,GAAG,+BAA+B,EAC1E,aAAa,CACd,CAAC;IACJ;;IAEA;IACA;IACA,IAAIA,YAAY,KAAK,GAAG,IAAIA,YAAY,KAAKP,QAAQ,CAACa,cAAc,CAACR,YAAY,CAACS,SAAS,CAAC,CAACC,OAAO,EAAE;MACpG;IACF;;IAEA;IACA;IACA;IACA;IACAC,UAAU,CAAC,MAAM;MACfd,WAAW,CAAC,SAAS,EAAE,IAAI,EAAEH,YAAY,EAAE;QAAEkB,IAAI,EAAEX;MAAQ,CAAC,CAAC;IAC/D,CAAC,EAAE,CAAC,CAAC;EACP,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}